<app-header></app-header>

<main class="favorites-page">
  <div class="container-custom">
    <!-- En-t√™te de la page -->
    <div class="page-header">
      <div class="header-content">
        <h1 class="page-title">
          <span class="heart-icon">‚ù§Ô∏è</span>
          Mes Favoris
        </h1>
        <p class="page-description">
          Retrouvez tous vos produits pr√©f√©r√©s en un seul endroit
        </p>
      </div>
      
      <!-- Statistiques des favoris -->
      <div class="favorites-stats">
        <div class="stat-item">
          <span class="stat-number">{{ getFavoriteProductsCount() }}</span>
          <span class="stat-label">Produits</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">{{ getTotalPrice() | currency:'EUR':'symbol':'1.2-2' }}</span>
          <span class="stat-label">Valeur totale</span>
        </div>
        <div class="stat-item" *ngIf="getTotalSavings() > 0">
          <span class="stat-number savings">{{ getTotalSavings() | currency:'EUR':'symbol':'1.2-2' }}</span>
          <span class="stat-label">√âconomies</span>
        </div>
      </div>
    </div>

    <!-- Actions -->
    <div class="favorites-actions" *ngIf="favoriteProducts.length > 0">
      <button 
        (click)="clearAllFavorites()" 
        class="clear-all-btn"
        title="Supprimer tous les favoris"
      >
        <svg class="btn-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
        </svg>
        Vider les favoris
      </button>
    </div>

    <!-- Contenu principal -->
    <div class="favorites-content">
      <!-- Liste des produits favoris -->
      <div *ngIf="favoriteProducts.length > 0" class="favorites-grid">
        <div 
          *ngFor="let product of favoriteProducts" 
          class="favorite-item"
        >
          <div class="favorite-card">
            <!-- Image du produit -->
            <div class="product-image-container">
              <img [src]="product.image" [alt]="product.name" class="product-image">
              <div class="product-overlay">
                <button 
                  (click)="removeFromFavorites(product.id)" 
                  class="remove-favorite-btn"
                  title="Retirer des favoris"
                >
                  <svg class="remove-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                  </svg>
                </button>
              </div>
            </div>

            <!-- Informations du produit -->
            <div class="product-info">
              <h3 class="product-name">{{ product.name }}</h3>
              
              <!-- Prix -->
              <div class="price-container">
                <span class="current-price">{{ product.price | currency:'EUR':'symbol':'1.2-2' }}</span>
                <span *ngIf="product.originalPrice" class="original-price">
                  {{ product.originalPrice | currency:'EUR':'symbol':'1.2-2' }}
                </span>
              </div>

              <!-- Note et cat√©gorie -->
              <div class="product-meta">
                <div class="rating">
                  <div class="stars">
                    <span *ngFor="let star of [1,2,3,4,5]" class="star">
                      <svg *ngIf="star <= product.rating" class="star-icon filled" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                      </svg>
                      <svg *ngIf="star > product.rating" class="star-icon empty" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                      </svg>
                    </span>
                  </div>
                  <span class="rating-text">{{ product.rating }}/5</span>
                </div>
                <span class="category">{{ product.category }}</span>
              </div>

              <!-- Date d'ajout -->
              <div class="added-date">
                <span class="date-label">Ajout√© le :</span>
                <span class="date-value">{{ product.addedToFavorites | date:'dd/MM/yyyy' }}</span>
              </div>

              <!-- Boutons d'action -->
              <div class="action-buttons">
                <button class="add-to-cart-btn">
                  <svg class="btn-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m6 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"></path>
                  </svg>
                  Ajouter au panier
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Message si aucun favori -->
      <div *ngIf="favoriteProducts.length === 0" class="empty-favorites">
        <div class="empty-icon">üíî</div>
        <h2 class="empty-title">Aucun produit favori</h2>
        <p class="empty-description">
          Vous n'avez pas encore ajout√© de produits √† vos favoris.
        </p>
        <a routerLink="/products" class="browse-products-btn">
          Parcourir les produits
        </a>
      </div>
    </div>

    <!-- Section de recommandations -->
    <div *ngIf="favoriteProducts.length > 0" class="recommendations-section">
      <h2 class="section-title">Vous pourriez aussi aimer</h2>
      <div class="recommendations-grid">
        <!-- Ici on pourrait ajouter des produits recommand√©s bas√©s sur les favoris -->
        <div class="recommendation-placeholder">
          <p>Produits recommand√©s bas√©s sur vos favoris</p>
        </div>
      </div>
    </div>
  </div>
</main>

<app-footer></app-footer>
