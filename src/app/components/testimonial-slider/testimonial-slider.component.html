<div class="testimonial-slider">
  <!-- Container principal -->
  <div class="slider-container">
    <!-- Boutons de navigation -->
    <button 
      class="nav-btn nav-btn-prev" 
      (click)="previous()"
      (mouseenter)="pauseAutoPlay()"
      (mouseleave)="resumeAutoPlay()"
      aria-label="Témoignage précédent"
    >
      <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg>
    </button>

    <button 
      class="nav-btn nav-btn-next" 
      (click)="next()"
      (mouseenter)="pauseAutoPlay()"
      (mouseleave)="resumeAutoPlay()"
      aria-label="Témoignage suivant"
    >
      <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
      </svg>
    </button>

    <!-- Slides des témoignages -->
    <div class="slides-container">
      <div 
        *ngFor="let testimonial of testimonials; let i = index" 
        class="slide"
        [class.active]="i === currentIndex"
        [class.prev]="i === (currentIndex - 1 + testimonials.length) % testimonials.length"
        [class.next]="i === (currentIndex + 1) % testimonials.length"
      >
        <div class="testimonial-content">
          <!-- Décoration de citation -->
          <div class="quote-decoration">
            <svg class="quote-icon" fill="currentColor" viewBox="0 0 24 24">
              <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"/>
            </svg>
          </div>

          <!-- Contenu du témoignage -->
          <blockquote class="testimonial-text">
            <p>{{ testimonial.content }}</p>
          </blockquote>

          <!-- Informations du client -->
          <div class="client-info">
            <div class="avatar-container">
              <img 
                [src]="testimonial.avatar" 
                [alt]="testimonial.name"
                class="client-avatar"
              >
              <div class="verification-badge">
                <svg class="verification-icon" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
              </div>
            </div>
            
            <div class="client-details">
              <h4 class="client-name">{{ testimonial.name }}</h4>
              <p class="client-role">{{ testimonial.role }}</p>
              
              <!-- Note avec étoiles -->
              <div class="rating-container">
                <div class="stars">
                  <span 
                    *ngFor="let filled of getStarArray(testimonial.rating)" 
                    class="star"
                    [class.filled]="filled"
                  >
                    ★
                  </span>
                </div>
                <span class="rating-text">{{ testimonial.rating }}/5</span>
              </div>
            </div>
          </div>

          <!-- Date -->
          <div class="testimonial-date">
            <span class="date-text">{{ testimonial.date }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Indicateurs de navigation -->
    <div class="slider-indicators">
      <button 
        *ngFor="let testimonial of testimonials; let i = index" 
        class="indicator"
        [class.active]="i === currentIndex"
        (click)="goToSlide(i)"
        (mouseenter)="pauseAutoPlay()"
        (mouseleave)="resumeAutoPlay()"
        [attr.aria-label]="'Aller au témoignage ' + (i + 1)"
      ></button>
    </div>

    <!-- Contrôles de lecture -->
    <div class="playback-controls">
      <button 
        class="control-btn"
        [class.paused]="!isAutoPlaying"
        (click)="isAutoPlaying ? pauseAutoPlay() : resumeAutoPlay()"
        [attr.aria-label]="isAutoPlaying ? 'Pause' : 'Lecture'"
      >
        <svg *ngIf="isAutoPlaying" class="control-icon" fill="currentColor" viewBox="0 0 24 24">
          <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
        </svg>
        <svg *ngIf="!isAutoPlaying" class="control-icon" fill="currentColor" viewBox="0 0 24 24">
          <path d="M8 5v14l11-7z"/>
        </svg>
      </button>
    </div>
  </div>
</div>
